pulo = keyboard_check_pressed(ord("K"));
esquerda = keyboard_check(ord("A"));
direita = keyboard_check(ord("D"));

if (place_meeting(x, y + velocidade_vertical, obj_bloco)) {
	while (!place_meeting(x, y + sign(velocidade_vertical), obj_bloco)) {
		y += sign(velocidade_vertical);
	}
	
	velocidade_vertical = 0;
}
else {
	velocidade_vertical += gravidade * massa;
}

if (pulo) {
	velocidade_vertical = -forca_do_pulo;
}

y += velocidade_vertical;

if (pulo) {
	velocidade_vertical = -forca_do_pulo;
}

direcao = -esquerda + direita;
velocidade_horizontal = velocidade * direcao;

if (direcao != 0 && direcao != image_xscale) {
	image_xscale = -image_xscale;
}

if (place_meeting(x + velocidade_horizontal, y - 1, obj_bloco)) {
	while (!place_meeting(x + sign(velocidade_horizontal), y - 1, obj_bloco)) {
		x += sign(velocidade_horizontal);
	}
	
	velocidade_horizontal = 0;
}

x += velocidade_horizontal;

switch (estado) {
	
	case "parado": {
		sprite_index = spr_skeleton_idle;
	
		if (velocidade_horizontal != 0) {
			estado = "movendo";
		}
		
		if (ataque) {
			estado = "atacando";
		}
		
		break;
	}
	
	case "movendo": {
		sprite_index = spr_skeleton_run;
		
		if (velocidade_horizontal == 0) {
			estado = "parado";
		}
		
		if (ataque) {
			estado = "atacando";
		}
		
		break;
	}
	
	/*case "atacando": {
		velocidade_horizontal = 0;
		sprite_index = spr_skeleton_attack_0;
		
		if (image_index == image_number - 2) {
			estado = "parado";
		}
		
		break;
	}*/
}